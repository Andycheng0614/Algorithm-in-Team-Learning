### 线性排序面试题

#### 面试题

1. 给定 N 个整数，寻找这 N 个数中最大的 K 个数
2. 从 10 G 个整数中找到中位数（可用内存 2 G，不考虑其他程序占用）

#### 问题 1 - 解法 1

当数据量比较小时（比如，几百个，几千个），直接使用排序就可以，但是，由于只需要最大的 K 个数，因此也可以使用部份排序。

1. 整体快速排序，时间复杂度 ：$O(N*log_2 N)$
2. 部份排序，时间复杂度：$O(N*K)$
3. 部份快速排序，时间复杂度：$O(N*log_2 K)$

> 如果 K 较小：$O(N*K) < O(N*log_2 N)$，则部份排序优于整体快速排序；如果 $O(N*K) > O(N*log_2 N)$，则整体排序由于部份排序；而部份快速排序优于前两种情况。

#### 问题 1 - 解法 2 - 计数排序

`如果`这 N 个数在某个特定的范围 (0, MAXN)，并且 MAXN 不太大，那么可以考虑计数排序：
1. 申请一个数组 `count[MAXN]` 来统计每个整数出现的次数（只需遍历数据一遍）
2. 然后从 MAXN - 0 开始遍历 `count` 数组，求累积和，直到找到最大的 K 个数


当然，也很有可能 MAXN 很大，如果申请一个 `count[MAXN]`数组，可能会占据很大的内存，甚至内存中可能都放不下，此时可以借鉴桶排序的思路，只是这时候的桶不用来排序，而是用来计数。假设最小数为$V_{min}$，最大数为$V_{max}$。

1. 将 $V_{min} - V_{max}$ 分成 M 个区间，并申请一个数组 `count[M]`，`count[i]`用于统计 $[V_{min}+d*(i-1), V_{min}+d*i)$ 之间的数，其中 $d=(V_{max} - V_{min})/N$
2. 计数，统计每个区间中元素的个数
3. 然后从 M- 0 开始遍历 `count` 数组，求累积和，直到找到第 K 大的数的区间，在此之前的区间都属于最大的 K 个数
4. 利用上述方法在对第 K 大的数所在的区间进行分块处理。

#### 问题 2 - 解法

在上一部分介绍了利用计数排序来找前 K 大的数，那么找第 K 大的数就更简单了，而找中位数就是找第 K 大的数的一种特殊情况，因此此处直接讨论找第 K 大的数。

1. 将 $V_{min} - V_{max}$ 分成 M 个区间，并申请一个数组 `count[M]`，`count[i]`用于统计 $[V_{min}+d*(i-1), V_{min}+d*i)$ 之间的数，其中 $d=(V_{max} - V_{min})/N$
2. 每次读入内存 2 G 个整数（分 5 次读入），计数，统计每个区间中元素的个数
3. 然后从 M- 0 开始遍历 `count` 数组，求累积和，直到找到第 K 大的数的区间
4. 利用上述方法在对第 K 大的数所在的区间进行分块处理。

> 注意：需要考虑分多少个桶，所占的内存是需要考虑的。

#### 参考

《编程之美》2.5
